scheming_version: 1
dataset_type: dataset

display_group_default: General
#display_group_order:
#  - Basic Information
#  - Contact Information
#  - General
#  - Science

display_groups:
  - label: Basic Information
    description: "This is the Basic Info section. "
  - label: General
    description: "This is the General section. "
  - label: Contact Information
    description: "This is the Contact Information section. "
  - label: Science
    description: "This is the Science section -- should be collapsed by default. "
    collapse_by_default: true

about:
about_url:
form_languages:
- en

dataset_fields:

# Basic Information

- field_name: title
  label: Title
  help_text: "Title of the dataset. Titles should be concise (no more than headline-length)."
  # validators: require_when_published
  display_group: Basic Information
  display_snippet: text.html

- field_name: notes
  label: Summary
  help_text: "Brief narrative summary of the dataset's contents."
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Basic Information
  validators: require_when_published
  default: "Please describe the following: \n
    - What data is included (data products): \n
    - What accessory information (reports, scripts) is included: \n
    - Objectives: \n
    - Describe the knowledge gap(s) the dataset is intended to fill: \n
    - If there are multiple tables/layers in the dataset, how are they related?
    "

- field_name: maintainer_email
  label: Maintainer Email
  help_text: "Email address of the person responsible for the dataset.  Notifications about access requests and other updates will be send to this email."
  validators: not_empty
  display_group: Basic Information
  display_snippet: text.html

# If the name field is removed from the schema, it should be autoslugged from the title
# But this does not happen, we get an error "The form contains invalid entries:  name: Missing value"
- preset: dataset_slug
  field_name: name
  label: Dataset ID
  help_text: "Enter a unique ID for this dataset. The ID should contain only lowercase letters and hyphens. For example, if your dataset is Sponge Reefs, set a URL such as sponge-reefs."
  display_group: Basic Information
  display_snippet: text.html

- field_name: owner_org
  label: "Publisher - Organization Name"
  help_text: "The organization (GoC Department or Agency) primarily responsible for publishing the dataset."
  validators: require_when_published owner_org_validator unicode
  form_snippet: organization.html
  display_group: Basic Information
  display_snippet: null

# This field is no longer used. But we cannot remove it from the schema,
# or it causes CKAN to crash
- field_name: primary_reference
  label: Primary Reference
  help_text: "The primary academic reference describing this dataset."
  form_snippet: null
  display_snippet: null
  display_group: Basic Information
#  validators: require_when_published

- field_name: citation
  label: Cite this data as
  help_text: "Citation format to be used when this dataset is referenced in another publication."
  default: "A citation will be automatically generated from your metadata. You may edit this later if needed."
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Basic Information
  validators: require_when_published

- field_name: start_date
  label: Start Date
  help_text: "Indicate the earliest date represented in this dataset."
  form_snippet: date.html
  validators: require_when_published
  display_group: Basic Information

- field_name: end_date
  label: End Date
  help_text: "Indicate the latest date represented in this dataset. If data collection is ongoing, enter the date of the most recent record in the data, and choose Ongoing under the Status section.  If this is a model or derived data (as opposed to data collected in the field), enter the last date that the model used to generate this data was updated.  In this case, end date can be the same as start date.  "
  form_snippet: date.html
  display_group: Basic Information
  validators: require_when_published

- field_name: summary_french
  label: Summary French
  help_text: "Brief narrative summary of the dataset's contents."
  form_snippet: null
  display_snippet: null
  default: "Placeholder for French summary"

# Contacts

- field_name: data_creator
  label: Data Creator
  help_text: "Contact information for the Principal Analyst: the lead person responsible for creating the data. Provide the Name, Position, Department, Address, Phone, and Email."
  display_group: Contact Information
  subfields:
  - field_name: creator_name
    label: Name
    make_searchable: True
    validators: require_when_published

  - field_name: creator_email
    label: Email
    make_searchable: True
    validators: require_when_published email_validator

  - field_name: creator_position
    label: Position
    validators: require_when_published

  - field_name: creator_organization
    label: Organization
    validators: require_when_published

  - field_name: creator_address
    label: Address
    validators: require_when_published

  - field_name: creator_phone
    label: Phone
    validators: require_when_published

- field_name: co_creators
  label: Co-Creators
  form_snippet: textarea.html
  help_text: "Provide the names, comma-separated, of any additional co-creators (secondary authors) for this dataset."
  display_group: Contact Information

- field_name: program_manager
  label: Program Manager
  help_text: "Contact information for the DFO Program Head (must be a permanent DFO employee). Provide the Name, Position, Department, Address, Phone, and Email."
  display_group: Contact Information
  subfields:

  - field_name: manager_name
    label: Name
    display_group: Contact Information
    make_searchable: True
    validators: require_when_published

  - field_name: manager_email
    label: Email
    display_group: Contact Information
    make_searchable: True
    validators: require_when_published email_validator

  - field_name: manager_position
    label: Position
    display_group: Contact Information
    validators: require_when_published

  - field_name: manager_organization
    label: Organization
    display_group: Contact Information
    validators: require_when_published

  - field_name: manager_address
    label: Address
    display_group: Contact Information
    validators: require_when_published

  - field_name: manager_phone
    label: Phone
    display_group: Contact Information
    validators: require_when_published

# General

- field_name: topic_category
  label: Topic Category
  help_text: "Main theme of the data. Choose the best match."
  display_snippet: select.html
  form_snippet: select.html
  default: oceans
  validators: require_when_published
  choices:
  - label: Biota
    value: biota
  - label: Oceans
    value: oceans
  - label: Environment
    value: environment
  - label: Boundaries
    value: boundaries
  - label: "Imagery, Base Maps, and Earth Cover"
    value: imageryBaseMapsEarthCover
  - label: Inland Waters
    value: inlandWaters
  - label: Geoscientific Information
    value: geoscientificInformation
  - label: "Climatology, Meteorology, and Atmosphere"
    value: climatologyMeteorologyAtmosphere
  - label: Economy
    value: economy
  - label: Elevation
    value: elevation
  - label: Farming
    value: farming
  - label: Health
    value: health
  - label: Military Intelligence
    value: intelligenceMilitary
  - label: Location
    value: location
  - label: Planning Cadastre
    value: planningCadastre
  - label: Society
    value: society
  - label: Structure
    value: structure
  - label: Transportation
    value: transportation
  - label: "Communication & Utilities"
    value: utilitiesCommunication

# Charset/language

- field_name: language
  label: Metadata Language
  help_text: "Language code and country of the metadata. Default: English."
  display_snippet: null
  form_snippet: null
  validators: require_when_published
  choices:
  - label: English
    value: "eng; CAN"
  - label: French
    value: "fr; CAN"
  default: "eng; CAN"

- field_name: character_set
  label: Metadata Character Set
  help_text: "Encoding of the metadata record. Default: utf8"
  default: "utf8"
  display_snippet: null
  form_snippet: null
  validators: require_when_published

- field_name: metadata_standard
  label: Metadata Standard
  help_text: "Name of the metadata standard/profile used."
  default: "North American Profile of ISO 19115:2003 - Geographic information - Metadata"
  display_snippet: null
  form_snippet: null
  validators: require_when_published

- field_name: date_completed
  label: Date Completed
  help_text: The date on which the dataset was substantially complete in its current form.
  form_snippet: date.html
  validators: require_when_published

- field_name: date_published
  label: Date Published
  help_text: "Date of publication of the dataset on this portal or on another data hosting environment. Default: today's date. (Not necessarily the same as the publication date of related academic research. Academic citations are described elsewhere.)"
  default: "{{ h.now().strftime('%Y-%m-%d') }}"
  form_snippet: date.html
  validators: require_when_published

- field_name: status
  label: Status
  help_text: Development phase of the dataset.
  display_snippet: select.html
  form_snippet: select.html
  validators: require_when_published
  choices:
  - label: Completed
    value: Completed
  - label: Ongoing
    value: Ongoing
  - label: Proposed
    value: Proposed
  - label: Obsolete
    value: Obsolete
  - label: Historical Archive
    value: Historical Archive

- field_name: update_frequency
  label: Update Frequency
  help_text: Revision cycle of the data.
  display_snippet: select.html
  form_snippet: select.html
  validators: require_when_published
  choices:
  - label: Annually
    value: Annually
  - label: Biannually
    value: Biannually
  - label: Quarterly
    value: Quarterly
  - label: Monthly
    value: Monthly
  - label: Fortnightly
    value: Fortnightly
  - label: Weekly
    value: Weekly
  - label: Daily
    value: Daily
  - label: Continual
    value: Continual
  - label: As Needed
    value: As Needed
  - label: Irregular
    value: Irregular
  - label: Not Planned
    value: Not Planned

- field_name: data_charset
  label: Data Character Set
  help_text: "Character coding standard in the dataset. Default: utf8"
  default: "utf8"
  display_snippet: null
  form_snippet: null
  validators: require_when_published

- field_name: data_language
  label: Data Language
  help_text: "Language of the data (attributes and values). Default: English."
  display_snippet: null
  form_snippet: null
  default: "English"
  validators: require_when_published

- field_name: hierarchyLevel
  label: Dataset Level
  help_text: "Use Dataset if this is a standalone data product.  Series is individual regions in a series of datasets covering a larger area, or some other subset of a larger data package."
  display_snippet: select.html
  form_snippet: select.html
  validators: require_when_published
  default: Dataset
  choices:
  - label: Dataset
    value: Dataset
  - label: Series
    value: Series

- field_name: keywords
  preset: tag_string_autocomplete
#  preset: select
  label: Keywords
  help_text: "At a minimum, one keyword must be supplied from the Government of Canada Core Subject Thesaurus at http://canada.multites.net/cst/index.htm. You are most likely to find useful keywords in the 'nature and environment' and 'science and technology' categories. Keywords must be comma-separated."
  validators: require_when_published tag_string_convert
# TODO: limit keywords to those in the goc-themes resource. This is not working.
  choices_helper: scheming_datastore_choices
#  datastore_choices_resource: goc-themes
  datastore_choices_resource: 88f5c7a2-7b25-4ce8-a0c6-081236f5da76
  datastore_choices_columns:
    value: theme
    label: theme
  classes: ["control-full"]
  form_attrs:
    data-module: autocomplete
    data-module-tags: false
#  validators: require_when_published tag_string_convert


# Science

- field_name: science_keywords
  preset: tag_string_autocomplete
  label: Science Keywords
  help_text: "Enter additional comma-separated scientific keywords not included in the general-purpose Government of Canada Core Subject Thesaurus. These keywords may include domain-specific vocabulary appropriate for scientific users.  The format of keywords should be:
  -	General terms: lowercase
  -	Place names: Camel Case
  -	Acronyms:  ALL CAPS
  "
  validators: require_when_published tag_string_convert
  display_group: Science

- field_name: theme
  label: Theme
  help_text: Choose the best match from the list.
  display_snippet: select.html
  form_snippet: select.html
  make_searchable: True
  display_group: Science
  validators: require_when_published
  choices:
  - label: Administrative Boundaries
    value: admin_boundaries
  - label: Base Mapping
    value: base_mapping
  - label: Bathymetry
    value: bathymetry
  - label: Benthic Species or Ecosystem
    value: benthic_species
  - label: Classification
    value: classification
  - label: Coastal Species or Ecosystem
    value: coastal_species
  - label: Groundfish Fisheries
    value: groundfish_fisheries
  - label: Groundfish Survey
    value: groundfish_survey
  - label: Herring Fisheries
    value: herring_fisheries
  - label: Herring Survey
    value: herring_survey
  - label: Marine Mammals
    value: marine_mammals
  - label: Pelagic Species or Ecosystem
    value: pelagic_species
  - label: Protected Areas
    value: protected_areas
  - label: Salmon
    value: salmon
  - label: Salmon Fisheries
    value: salmon_fisheries
  - label: Salmon Survey
    value: salmon_survey
  - label: Shellfish Fisheries
    value: shellfish_fisheries
  - label: Shellfish Survey
    value: shellfish_survey

- field_name: methods
  label: Methods
  help_text: The methods field documents scientific methods used in the collection
        or derivation of this dataset.  It includes information on items such
        as tools, instrument calibration and software. It can also include a
        complete description of the lineage of the data.  It may refer to
        sections of an associated academic citation or other published
        resource.
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Science
  validators: require_when_published


# Composite Repeating Field for Source Data

- field_name: data_inputs
  label: Data Sources
  help_text: "List of source data inputs used to produce this dataset.  Provide a link to the
        source data where possible (link to another dataset on the GIS Hub, or an
        external link).  Include the date that the input was extracted,
        if known.  Add as many inputs as you need."
  display_group: Science
  form_blanks: 1
  repeatable: true
  subfields:
  - field_name: input_description
    label: Source
    form_snippet: textarea.html
    display_snippet: text.html
    display_group: Science
    validators: require_when_published

- field_name: scripts_or_software_routines
  label: Scripts or Software Routines
  help_text: "Link to script(s) used to process the data, for example on the GCCode
        GitLab site. Alternatively, include the scripts or queries in a Scripts folder
        inside in the zip file that you will upload. Document the
        purpose of each script, and anything required to run the script again.
        If no scripts were used to create the data, indicate how it was created
        (e.g. manually created using analysis tools in ArcGIS)."
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Science
  validators: require_when_published

- field_name: spatial_data_quality
  label: Spatial Data Quality
  help_text: "A description of the quality of the spatial data. It is important to
        describe the spatial data quality with reference to the data
        processing steps.  Was location data captured with survey-grade GPS,
        consumer GPS, georeferenced paper charts, ships log?  Is this dataset
        the result of intentional degradation of the input data to preserve privacy
        (e.g. 3 boat rule)?  Were multiple datasets captured at different
        spatial resolutions used in this analysis?  Were point data extrapolated
        to polygons, or polygons/lines converted to centroids?"
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Science
  validators: require_when_published

- field_name: positional_accuracy
  label: Positional Accuracy
  help_text: "Quantitative estimate of horizontal/vertical accuracy. Express
        in metric units where possible."
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Science
  validators: require_when_published

- field_name: attribute_accuracy
  label: Attribute Accuracy
  help_text: General description of the degree to which attribute values reflect
        real-world conditions.
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Science
  validators: require_when_published

- field_name: logical_consistency
  label: Logical Consistency
  help_text: Report on fidelity of relationships in the data set, the validity of its relationships to other data sets, and the degree to which the entities represent the real-world objects or concepts they are intended to capture.
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Science
  validators: require_when_published

- field_name: completeness
  label: Completeness
  help_text: Report on the completeness of the dataset relative to its areal coverage, and the overall completeness of attributes.
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Science
  validators: require_when_published

- field_name: absence_data
  label: Absence Data
  help_text: "Does the dataset include recorded (observed) absence of specific features, and if so, for which attributes? If no absence data was recorded, enter 'No Absence Data' in this field."
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Science
  validators: require_when_published

- field_name: uncertainties
  label: Uncertainties
  help_text: "Describe uncertainties in measurement and methodology. Include any known biases. For example, was data collection opportunistic, or part of the survey design? In there any known bias from individual observers?"
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Science
  validators: require_when_published

- field_name: use_restrictions
  label: Use Restrictions
  help_text: "Restrictions on appropriate use of the resource.  Examples:  Not suitable for navigation.  Do not use for fisheries assessment."
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Science
  validators: require_when_published

# Composite Repeating Field for Change History
- field_name: change_history
  label: Change History
  help_text: "A description of changes made to the data since its release. For each change, indicate the date of change and describe what was changed and why. When a dataset is first published, there is one change history entry for the initial creation of the dataset.  Add additional change history entries as needed."
  display_group: Science
  repeatable: true
  form_blanks: 1
  subfields:
  - field_name: change_description
    label: Description of Change
    default: "Initial creation of dataset record"
    form_snippet: textarea.html
    display_snippet: text.html
    display_group: Science
    validators: require_when_published

  - field_name: change_date
    label: Date of Change
    form_snippet: date.html
    display_snippet: date.html
    default: "{{ h.now().strftime('%Y-%m-%d') }}"
    display_group: Science

- field_name: temporal_coverage
  label: Temporal Coverage
  help_text: "If the temporal coverage of the dataset is more complex than a simple start and end date, describe it here.  You may describe temporal coverage as a single point in time, multiple points in time, and one or more range of dates.  Seasonality can also be described here.  For derived datasets, please specify the temporal coverage of all input data here. Specific start and end dates are preferable, but year ranges are acceptable if the exact dates are uncertain or not applicable."
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Science


  # Composite repeating field for species codes
- field_name: species_codes
  label: Species Codes
  help_text: "A list of species names / species codes.  If your data does not contain any species codes, disregard this section and leave the fields blank in the section below.  For each species in your data, provide the following information.  Species Code: A code from the list of ~7400 species codes in use at Pacific Science. If a code you need is not available, the list can be updated. Age Data: Does the sample include age data?  Observation Type:  Was the species observed incidentally, or targeted as part of the survey design?  Was the presence of species inferred or observed?  Choose from: Targeted observation, incidental observation, inferred.  If you have a large number of species codes, you may include a file named species_codes.csv.  For a detailed description of the format of this file, refer to the GIS Hub publishing guide document. "
  repeatable: true
  form_blanks: 1
  display_group: Science
  subfields:

  - field_name: sp_code
    label: Species Code
    preset: select
    choices_helper: scheming_datastore_choices
    datastore_choices_resource: species-code-autocomplete
    datastore_choices_columns:
      value: code
      label: species_name
    form_attrs:
      data-module: autocomplete
    display_group: Science

  - field_name: age_data
    label: Age Data
    display_snippet: select.html
    form_snippet: select.html
    display_group: Science
    choices:
    - label: Yes
      value: Yes
    - label: No
      value: No

  - field_name: obs_type
    label: Observation Type
    display_snippet: select.html
    form_snippet: select.html
    display_group: Science
    choices:
    - label: Targeted observation
      value: Targeted
    - label: Incidental observation
      value: Incidental
    - label: Inferred
      value: Inferred

# Composite Repeating Field for references

- field_name: references
  label: References
  help_text: "Academic references that are closely associated with the data. Add as many entries as you need.  Example: Gregr, E. J., J. Lessard, and J. Harper. 2013. A spatial framework for representing nearshore ecosystems. Progress In Oceanography 115:189-201."
  repeatable: true
  form_blanks: 1
  display_group: Science
  subfields:

  - field_name: reference
    label: Reference
    form_snippet: textarea.html
    display_snippet: text.html
    display_group: Science
    validators: require_when_published

- field_name: collaboration
  label: Collaboration
  help_text: "Describe collaboration with academia, other government agencies, and external contributors. If produced internally by DFO, enter 'No collaboration outside of DFO.'  Indicate collaboration with organizations rather than individuals. "
  default: "No collaboration outside of DFO."
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Science
  validators: require_when_published

- field_name: administrative_boundaries
  label: Administrative Boundaries
  help_text: "A list of administrative boundaries that the dataset overlaps, at different scales: bioregions, PFMA's, other regions that have been defined."
  form_snippet: null
  display_snippet: null

- field_name: other_information
  label: Other Information
  help_text: Relevant information that does not fit in any other category.
  form_snippet: textarea.html
  display_snippet: text.html
  display_group: Science

- field_name: confidentiality
  label: Confidentiality
  help_text: "Level of confidentiality or sensitivity of the dataset.  For a description of the categories, refer to: https://www.tpsgc-pwgsc.gc.ca/esc-src/protection-safeguarding/niveaux-levels-eng.html.  Not Protected means that no harm would occur if the data were released to the public.  However, choosing this option does not mean that your data will be made public on this website (all datasets published on this site are restricted to registered users).  Protected A applies to data that could harm individuals or corporations if released, such as fishing events and bathymetry.  Note that fishing data received 'in confidence' should be Protected A, not Confidential.  Confidential applies to data that could harm the national interest if released.  At this time, Confidential should be used only for abalone data.  Data classified as Protected B, Secret, or any higher classification cannot be uploaded on this system.  For these security classification, you may still create a dataset record using this system, but do not upload the actual data. "
  form_snippet: select.html
  display_snippet: select.html
  display_group: Science
  default: Not Protected
  choices:
    - label: Not Protected
      value: Not Protected
    - label: Protected A
      value: Protected A
    - label: Confidential
      value: Confidential
  validators: require_when_published

- field_name: reliability
  label: Reliability
  help_text: A measure or estimate of the reliability of the dataset for a specific purpose, if known.
  display_group: Science
  form_snippet: null
  display_snippet: null


# Extras

resource_fields:
# Changed to title
- field_name: title
  label: Title
  help_text: "Title of the uploaded data package. "
#  help_text: "Name of the uploaded data package.  This is populated automatically from your uploaded data. DO NOT EDIT. "
#  default: "Placeholder - DO NOT EDIT"
  display_snippet: text.html
  validators: require_when_published

- field_name: layer_name
  label: Layer Name
  help_text: "Layer name is detected by the GIS Hub after data upload.  You do not need to complete this field manually. "
  display_group: Spatial
  form_snippet: text.html
  #validators: require_when_published

- field_name: layer_description
  label: Layer Description
  help_text: "Describe what this layer/table/document represents, in the context of the entire dataset.  If there is more than one layer in your uploaded data, complete this field only after the data has been uploaded and a metadata entry has been created for each layer. "
  form_snippet: textarea.html
  display_snippet: text.html
  # validators: require_when_published

# Projection
# Spatial metadata fields that are both annoying for users to enter manually and cannot have a default should be
# optional and hidden for now (will be populated later by Python script on backend).

- field_name: projection_text
  label: Projection Name
  display_group: Projection
  help_text: "The name of the projection of the data. Example: BC_Albers_Equal_Area.  This is detected by the GIS Hub after data upload.  You do not need to complete this field manually, unless it was detected incorrectly."
  form_snippet: text.html
  default: "Detected by the GIS Hub after data upload."
  #validators: require_when_published

- field_name: projection_code
  label: Projection Code
  display_group: Projection
  help_text: "The numeric EPSG/WKID projection code. You can find this information in the Coordinate System tab of the layer information window in ArcGIS under 'WKID' or by searching on http://spatialreference.org/ref/epsg/.   This is detected by the GIS Hub after data upload.  You do not need to complete this field manually, unless it was detected incorrectly."
  form_snippet: text.html
  default: "Detected by the GIS Hub after data upload."
  #validators: require_when_published

- field_name: projection_codespace
  label: Codespace
  default: "http://www.epsg-registry.org"
  display_group: Projection
  form_snippet: null
  display_snippet: null
  #validators: require_when_published

- field_name: codespace_version
  label: Codespace Version
  default: "9.2.2"
  display_group: Projection
  form_snippet: null
  display_snippet: null
  #validators: require_when_published

# Spatial

- field_name: spatial
  label: Spatial Extent Preview
  display_group: Spatial
  display_snippet: dataset_map.html
  form_snippet: null

- field_name: data_format
  label: Data Format
  help_text: "Data format is detected by the GIS Hub after data upload.  You do not need to complete this field manually, unless the data format was detected incorrectly.  Indicate the format of the spatial data inside the zip file. Note that there may be other non-spatial components included with a dataset (e.g. PDF report, R script). Do not enter zip as the format."
  display_group: Spatial
  validators: require_when_published
  form_snippet: select.html
  display_snippet: select.html
  default: File Geodatabase
  choices:
    - label: File Geodatabase
      value: File Geodatabase
    - label: Shapefile
      value: Shapefile
    - label: GeoTiff
      value: GeoTiff
    - label: GeoJson
      value: GeoJson
    - label: Other (Document, non-spatial, etc.)
      value: Other

- field_name: spatial_type
  label: Spatial Type
  form_snippet: select.html
  display_snippet: select.html
  display_group: Spatial
  help_text: "Spatial type is detected by the GIS Hub after data upload.  You do not need to complete this field manually, unless the spatial type was detected incorrectly. "
  default: vector
  validators: require_when_published
  choices:
    - label: Vector
      value: vector
    - label: Raster
      value: raster
    - label: Table
      value: table
    - label: TIN
      value: tin
    - label: Video
      value: video
    - label: None
      value: none

- field_name: geometry_type
  label: Geometry Type
  form_snippet: select.html
  display_snippet: select.html
  display_group: Spatial
  help_text: "Geometry type is detected by the GIS Hub after data upload.  You do not need to complete this field manually, unless the geometry type was detected incorrectly. "
  default: point
  validators: require_when_published
  choices:
    - label: Point
      value: point
    - label: Polyline
      value: polyline
    - label: Polygon
      value: polygon
    - label: TIN
      value: tin
    - label: Geometry
      value: geometry
    - label: Coverage
      value: coverage
    - label: None
      value: none

- field_name: bbox
  label: Bounding Box (lat-lon)
  help_text: "Bounding Box is calculated for each layer by the GIS Hub after data upload.  You do not need to complete this field manually. "
  display_group: Spatial
  form_snippet: textarea.html
  display_snippet: text.html
  default: "Detected by the GIS Hub after data upload."
  #validators: require_when_published

- field_name: locale
  label: Locale
  help_text: "Location of the spatial data in DFO's regions and bioregions.  This is calculated for each layer by the GIS Hub after data upload.  You do not need to complete this field manually. "
  form_snippet: textarea.html
  display_snippet: text.html
  default: "Detected by the GIS Hub after data upload."
  display_group: Spatial

- field_name: uuid
  label: Unique ID
  display_group: Spatial
  form_snippet: null

- field_name: raster_info
  label: Raster Metadata
  display_group: Spatial
  form_snippet: null
  display_snippet: text.html
  help_text: "Field for raster metadata, including pixel size, dimensions, and raster band details. This field will be filled automatically when a GeoTiff or other recognized raster file is uploaded. Do not populate this field manually."

# Composite Repeating Field for Attributes
# One to many relationship for attribute table fields

- field_name: attribute
  label: Attributes
  help_text: "You must clearly document all attributes for all spatial layers and standalone tables in your uploaded data.  Some attribute information (field name and type) will be populated automatically after you upload spatial data.  If you have not yet uploaded data, or you are replacing the existing data, leave these fields blank for now.  After your data has been uploaded and field names and types have been extracted, you will still have to edit this section later to add, at minimum, a description for each field.  The field description should indicate what the value represents, how was it measured, and whether it is generalized.  Units: if the attribute is quantitative, indicate the measured units and an estimate of the accuracy.  Coded Values: if the attribute contains a list of coded values (i.e. values from a lookup table), describe the meaning of each of the codes. (For a very long list of coded values, instead provide a link to a document or website describing the coded values.)  Note: raster attributes cannot be detected automatically.  You must add any raster attributes manually using this form. "
  form_blanks: 0
  repeatable: true
  display_group: Attributes
  subfields:

  - field_name: column_name
    label: Field Name
#    help_text: The name of the field in the attribute table
    form_snippet: text.html
    display_snippet: text.html
    display_group: Attributes

  - field_name: column_type
    label: Field Type
    form_snippet: select.html
    display_snippet: select.html
    display_group: Attributes
    choices:
      - label: Text
        value: Text
      - label: Integer
        value: Integer
      - label: Float
        value: Float
      - label: Date
        value: Date
      - label: Boolean
        value: Boolean
      - label: ObjectId
        value: ObjectId
      - label: Geometry
        value: Geometry

  - field_name: description
    label: Field Description
    #help_text: "Indicate what the value represents, how was it measured, is it generalized, and an estimate of the accuracy (if applicable)."
    form_snippet: text.html
    display_snippet: text.html
    display_group: Attributes

  - field_name: units
    label: Units
    #help_text: If relevant, indicate the units.
    form_snippet: text.html
    display_snippet: text.html
    display_group: Attributes

  - field_name: coded_values
    label: Coded Values
    #help_text: "If the attribute contains a list of coded values (i.e. values from a lookup table), describe the meaning of each of the codes. If the list of coded values is excessively long, do not try to paste it in this box; instead include a link to a document or website describing the coded values."
    form_snippet: text.html
    display_snippet: text.html
    display_group: Attributes


# Other

- field_name: disclaimer
  label: Download Disclaimer
  help_text: A disclaimer that is displayed to authorized users before allowing data download.
  default: "This data is intended for scientific research only. Fisheries and Oceans Canada (DFO) is not responsible for damages resulting from any omissions or errors that may be contained in these data and expressly disclaims any warranty of fitness for any particular purpose. DFO shall not be liable for any losses, financial or otherwise, due to the use of these data. The user assumes the entire risk as to the suitability, results and performance of the data for their proposed use."
  form_snippet: textarea.html
  display_snippet: null

- field_name: disclaimer_url
  label: Download Disclaimer (Remote)
  help_text: "Optional URL to a downloadable disclaimer (e.g. a PDF file) with terms and conditions that must be accepted before downloading this resource."
  form_snippet: text.html
  display_snippet: null

- field_name: url
  label: Download URL
  upload_label: "File Upload"
  help_text: "Prepare your data for uploading. ESRI File Geodatabases and Shapefiles are supported, but need to be uploaded as a zip file. For a shapefile, include all components (.shp, .dbf, .shx and so on) in the zip file. For a file geodatabase, create a new geodatabase and copy only the feature classes/tables that you want to publish. Zip the entire file geodatabase folder (.gdb).  You may also include documents and scripts in separate folders inside the zip file.  If you are not uploading a file with your data, you may instead provide the URL to the data download on another website, outside of the GIS Hub.  This is used, for example, when you are creating a metadata record that points to a dataset hosted on the BC Geographic Data Warehouse."
  validators: not_empty unicode remove_whitespace
  form_snippet: upload.html
  upload_field: upload
  upload_clear: clear_upload

- field_name: restricted
  label: "Access Restrictions"
  help_text: "Access restrictions determine who can view all of the metadata content and download the data.  Even for sensitive datasets, a minimum set of metadata fields are required and will be visible to all users: the dataset title, summary, keywords, and contact information for the data owner.  You may choose to allow other metadata fields and data download to be available to any of the following.  All Registered Users: anyone who is registered on the GIS Hub will have access. Any Organization Members: restrict access to users who are in an organization on the GIS Hub. Same Organization Members: restrict access to users who are in the same organization. For example, if you are in the MSEA organization, all MSEA users, but no one outside of MSEA, will have access.  Allowed Users/Groups Only: allow access only for specific users or groups.  If you choose this option, individual users can be added by typing names into the Allowed Users field below. "
  display_snippet: null
  subfields:
  - field_name: level
    label: Level
    preset: select
    form_include_blank_choice: False
    validators: require_when_published
    choices:
    - value: registered
      label: All Registered Users
    - value: any_organization
      label: Any Organization Members
    - value: same_organization
      label: Same Organization Members
    - value: only_allowed_users
      label: Allowed Users/Groups Only
  - field_name: allowed_users
    label: Allowed Users
    preset: tag_string_autocomplete
    form_attrs:
        data-module: autocomplete
        data-module-tags: ""
        data-module-source: "/api/2/util/user/autocomplete?q=?"

